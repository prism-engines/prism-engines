# Temporal Resolution Configuration
# ==================================
#
# This file defines temporal analysis parameters for PRISM.
# The system uses resolution-based configuration (weekly/monthly/quarterly)
# to determine appropriate time scales for analysis.
#
# Key Principles:
# 1. Never upsample - only aggregate DOWN to slower frequencies
# 2. Resolution matches the analytical question, not hardware
# 3. Data determines the floor frequency (slowest indicator wins)
#
# Usage in Python:
#   from engine.orchestration.temporal_analysis import build_temporal_config
#   cfg = build_temporal_config(resolution='monthly')

# Default resolution for analysis
default_resolution: monthly

# Resolution presets
# Each preset defines frequency, window size, and lookback period
resolutions:
  weekly:
    frequency: W-FRI          # Week ending Friday
    window_periods: 52        # 1 year of weeks
    stride_divisor: 4         # Stride = window/4 = 13 weeks
    lookback_default: 2Y
    description: >
      Tactical monitoring - recent regime shifts, short-term analysis.
      Use for: monitoring emerging stress, post-event analysis, short-term tilts.

  monthly:
    frequency: M              # Month end
    window_periods: 60        # 5 years of months
    stride_divisor: 4         # Stride = window/4 = 15 months
    lookback_default: 10Y
    description: >
      Strategic analysis - cycle positioning, portfolio tilting (DEFAULT).
      Use for: standard regime analysis, economic cycle positioning.
      Most FRED data releases monthly.

  quarterly:
    frequency: Q              # Quarter end
    window_periods: 40        # 10 years of quarters
    stride_divisor: 4         # Stride = window/4 = 10 quarters
    lookback_default: 30Y
    description: >
      Structural analysis - secular trends, long-term patterns.
      Use for: multi-decade analysis, GDP/productivity cycles.

# Aggregation rules by data type
# Determines how to aggregate higher-frequency data to lower frequency
aggregation:
  price: last           # Month-end snapshot (SPY, ETFs)
  yield: mean           # Average conditions (DGS10, rates)
  rate: mean            # Average conditions (Fed Funds)
  ratio: last           # Point-in-time position (MA ratios)
  volume: sum           # Total activity
  flow: sum             # Total activity (fund flows)
  volatility: mean      # Average stress (VIX)
  index: last           # Point-in-time value (CPI, GDP)
  level: last           # Point-in-time value
  change: sum           # Cumulative change
  default: last         # Default: use last value

# Window and stride guidelines
# Based on dominant cycle detection (future enhancement)
window_guidelines:
  weekly:
    min_periods: 26       # 6 months minimum
    max_periods: 104      # 2 years maximum
    default_periods: 52   # 1 year default
    rationale: "Captures annual seasonality"

  monthly:
    min_periods: 24       # 2 years minimum
    max_periods: 120      # 10 years maximum
    default_periods: 60   # 5 years default
    rationale: "Captures business cycle"

  quarterly:
    min_periods: 20       # 5 years minimum
    max_periods: 80       # 20 years maximum
    default_periods: 40   # 10 years default
    rationale: "Captures long cycles"

# Stride calculation
# Ensures 75% overlap for smooth temporal evolution
stride:
  divisor: 4              # stride = window / 4
  min_overlap: 0.5        # Minimum 50% overlap
  max_overlap: 0.9        # Maximum 90% overlap

# Lens configuration
# All lenses are available for resolution-based analysis
# (no device-based filtering)
lenses:
  available:
    - magnitude
    - pca
    - influence
    - clustering
    - decomposition
    - granger
    - dmd
    - mutual_info
    - network
    - regime_switching
    - anomaly
    - transfer_entropy
    - tda
    - wavelet
  default: all            # Use all available lenses by default

# Multi-resolution configuration (FUTURE - Phase 3)
# Cross-domain multi-resolution parallel engine
multi_resolution:
  enabled: false
  layers:
    fast: weekly
    medium: monthly
    slow: quarterly
  cross_scale_coherence: false

# Question-to-resolution mapping guide
question_mapping:
  - question: "Is something breaking right now?"
    timescale: "Days-weeks"
    resolution: weekly

  - question: "Where are we in the cycle?"
    timescale: "Months"
    resolution: monthly

  - question: "Is this a secular shift?"
    timescale: "Years"
    resolution: quarterly
