# ValidationPolicy Configuration
# Agent: engine_output_validation_agent.py
# Purpose: Engine output validation thresholds and penalties
#
# All values here are the EXACT defaults from the hardcoded ValidationPolicy dataclass
# and REASON_SEVERITY dict.
# Changing these values WILL change agent behavior.

version: "1.0.0"

# Eigenvalue thresholds (PCA)
eigenvalue_ratio_min: 0.1      # Min ratio of 1st to 2nd eigenvalue
explained_variance_min: 0.5    # Min cumulative explained variance

# HMM thresholds
state_entropy_min: 0.3         # Min entropy of state distribution
transition_count_min: 3        # Min state transitions

# Numerical thresholds
variance_min: 1.0e-10          # Min variance to not be constant
condition_number_max: 1.0e+10  # Max condition number

# Window coverage thresholds
window_coverage_warn: 0.5      # Below this = warning
window_coverage_error: 0.2     # Below this = error

# Hurst exponent boundary tolerance
hurst_boundary_tolerance: 0.05  # Distance from 0 or 1

# Reason code penalties
# Format: REASON_CODE: [severity, penalty]
# severity: fatal | error | warning
# penalty: confidence penalty weight (0.0-1.0)
reason_penalties:
  # Fatal - blocks all inference (penalty = 1.0)
  ZERO_VARIANCE:
    severity: fatal
    penalty: 1.0
  NAN_VALUES:
    severity: fatal
    penalty: 1.0
  INF_VALUES:
    severity: fatal
    penalty: 1.0
  NUMERICAL_OVERFLOW:
    severity: fatal
    penalty: 1.0

  # Error - degrades confidence significantly
  FLAT_EIGENVALUES:
    severity: error
    penalty: 0.3
  DEGENERATE_STATES:
    severity: error
    penalty: 0.4
  CONSTANT_OUTPUT:
    severity: error
    penalty: 0.5
  WINDOW_MINIMAL:
    severity: error
    penalty: 0.5
  GRANGER_UNSTABLE:
    severity: error
    penalty: 0.4

  # Warning - minor confidence reduction
  LOW_ENTROPY:
    severity: warning
    penalty: 0.2
  INSUFFICIENT_TRANSITIONS:
    severity: warning
    penalty: 0.2
  NUMERICAL_UNDERFLOW:
    severity: warning
    penalty: 0.1
  WINDOW_SPARSE:
    severity: warning
    penalty: 0.2
  CORRELATION_DEGENERATE:
    severity: warning
    penalty: 0.2
  WAVELET_EDGE_EFFECTS:
    severity: warning
    penalty: 0.15
  DMD_UNSTABLE_MODES:
    severity: warning
    penalty: 0.2
  HURST_BOUNDARY:
    severity: warning
    penalty: 0.15
